#!/usr/bin/env python3
#
# Generate OpenCL programs using clsmith.
#
from argparse import ArgumentParser
from sys import exit, stderr

import smith
from smith.encoder import lr_decode


def main():
    parser = ArgumentParser()
    parser.add_argument('input', help='path to LR-encoded OpenCL file')
    args = parser.parse_args()

    with open(smith.assert_exists(args.input)) as infile:
        input = infile.read()

    print(lr_decode(input))


if __name__ == '__main__':
    main()