#!/usr/bin/env python3
#
# Extract features.
#
from argparse import ArgumentParser

import labm8
from labm8 import fs

import smith
from smith import features

def main():
    parser = ArgumentParser()
    parser.add_argument('inputs', nargs='+', help='input path(s)')
    parser.add_argument('-d', '--dir-mode', action='store_true',
                        help='treat inputs as directories')
    args = parser.parse_args()

    inputs = args.inputs
    dir_mode = args.dir_mode

    if dir_mode:
        trees = [fs.ls(d, abspaths=True, recursive=True) for d in inputs]
        paths = [item for sublist in trees for item in sublist]
    else:
        paths = [fs.path(f) for f in inputs]

    features.files(paths)


if __name__ == '__main__':
    main()
