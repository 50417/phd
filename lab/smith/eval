#!/usr/bin/env bash
#
# Create plots.
#

main() {
    local dir=img

    rm -rfv $dir
    mkdir -p $dir

    smith-plot features benchmarks/data/platform-b.csv \
               --group class -o $dir/bench-features-class-B.pdf \
               --title "Benchmarks results for Platform B" &
    smith-plot features benchmarks/data/platform-b.csv \
               --group suite -o $dir/bench-features-suite-B.pdf \
               --title "Benchmarks results for Platform B" &

    smith-plot features benchmarks/data/platform-a.csv \
               --group class -o $dir/bench-features-class-A.pdf \
               --title "Benchmarks results for Platform A" &
    smith-plot features benchmarks/data/platform-a.csv \
               --group suite -o $dir/bench-features-class-A.pdf \
               --title "Benchmarks results for Platform A" &

    smith-plot features benchmarks/data/training-combined.csv \
               --group class -o $dir/bench-features-class-C.pdf \
               --title "Benchmarks results for both experimental platforms" &
    smith-plot features benchmarks/data/training-combined.csv \
               --group suite -o $dir/bench-features-class-C.pdf \
               --title "Benchmarks results for both experimental platforms" &


    smith-plot features driver/data/synthetic/platform-b.csv \
               --group class -o $dir/syn-features-class-B.pdf \
               --title "Synthetic kernels for Platform B" &

    smith-plot features driver/data/synthetic/platform-a.csv \
               --group class \-o $dir/syn-features-class-A.pdf \
               --title "Synthetic kernels for Platform A" &

    smith-plot features driver/data/synthetic/training-combined.csv \
               --group class -o $dir/syn-features-class-C.pdf \
               --title "Synthetic kernels for both experimental platforms" &

    for job in `jobs -p`
    do
        wait $job
    done

    xdg-open $dir
}
main $@
