\section{Introduction}\label{sec:intro}

\cc{Draft annotation}
\hl{Draft annotation}
\pp{Draft annotation}
\am{Draft annotation}

\noindent
Figure~\ref{fig:difftest} shows the differential testing methodology.

Developing a random program generator is a huge undertaking, requiring expert knowledge of the target programming language, and complex construction logic. CSmith~\cite{Yang2011} was developed over years, and is a 40k line C++ program. Extending CSmith to OpenCL~\cite{Lidbury2015a} took 9 months (confirmed by developers), and is over 8k lines of code. Despite this, they are far from ``feature complete'' - e.g. CLSmith can't deal with floating point arithmetic, which is dominant in the popular use cases for OpenCL.

In contrast, our approach is programming language agnostic, requiring only a corpus of sample programs in the intended programming language. Such a corpus can be assembled from GitHub. Learning and sampling an LSTM model requires less than a 100 line of Python script, and contains no programming language-specific logic.

% Reference: UB in C https://blog.regehr.org/archives/1520
% Reference: C99 spec appendix J2 - list of UBs
% OpenCL un-undefines some of those behaviours (e.g. it provides conversion functions between data types), but also adds to them.

We make the following contributions:
%
\begin{itemize}
\item we find bugs faster than state-of-the-art. i.e. Production is slower than CLSmith but testing is faster (and no/little reduction);
\item we find bugs that the state-of-the-art cannot. E.g. compiler crashes from invalid inputs;
\item our test cases are more accessible than state-of-the-art. Code samples do not require reduction, and are more human-like in their use of the programming language;
\item our tool is not language specific. We \emph{infer} programming language use from examples. CLSmith requires expert-driven development for every language feature supported. 40+k lines of C++ vs a few hundred lines of Python.
\end{itemize}

\begin{figure}
  \centering
  \includegraphics[width=.9\columnwidth]{img/difftest} %
  % \vspace{-2em}%
  \caption{%
    Differential testing compilers across a single test case. A test case consists of a program source and runtime parameters. Outcomes are either the output of the program execution, a compiler crash, or a runtime crash.%
  }%
  \label{fig:difftest}
\end{figure}